# Specification: 시공사례(Performance) 글 수정 기능 개발

## 1. 개요 (Overview)
- **목적:** 사용자가 웹 인터페이스를 통해 기존 시공사례 게시글을 자유롭게 수정할 수 있는 기능을 제공합니다.
- **주요 변화:** 기존의 마크다운 파일 기반 동기화 방식에서 **DB 중심(DB-Centric) 관리 방식**으로 전환하여, 파일 유무와 관계없이 웹에서 모든 데이터를 제어합니다.
- **핵심 기술:** Tiptap 에디터 (React 기반), FastAPI (Backend), SQLAlchemy.

## 2. 기능적 요구사항 (Functional Requirements)

### 2.1 데이터 관리 정책 변경
- `.md` 파일 동기화(`sync_md.py`) 로직을 수정하여, 동기화 시 기존 DB 데이터를 삭제하지 않고 새로운 데이터만 추가하거나 초기화 용도로만 사용하도록 변경합니다.
- 한 번 DB에 등록된 시공사례는 웹 UI를 통해 수정된 내용을 최종 진실의 원천(Source of Truth)으로 삼습니다.

### 2.2 수정 페이지 (Frontend - Edit Page)
- **입력 항목:**
    - 제목 (Title)
    - 카테고리 (Category): 조경식재, 수목치료 등 선택 가능
    - 시공일 (Construction Date)
    - 발주처 (Client) 및 기타 메타데이터
    - 대표 이미지 (Thumbnail): 기존 이미지 확인 및 변경 기능
- **본문 에디터 (Tiptap):**
    - 위지윅(WYSIWYG) 방식의 텍스트 편집.
    - **이미지 관리:**
        - 본문 내 이미지 드래그 앤 드롭으로 위치 이동.
        - 새로운 이미지 추가 (업로드).
        - 기존 이미지 삭제 및 확인.

### 2.3 백엔드 API (Backend - API)
- `PUT /api/v1/performances/{id}`: 시공사례 정보를 업데이트하는 API 엔드포인트 구현.
- 이미지 업로드 처리: 본문에 삽입되는 이미지를 서버의 특정 경로(`uploads/`)에 저장하고 URL을 반환하는 기능.

## 3. 비기능적 요구사항 (Non-Functional Requirements)
- **사용자 경험 (UX):** 노션(Notion)과 유사한 직관적인 편집 환경 제공.
- **데이터 무결성:** 수정 중 오류 발생 시 기존 데이터가 손실되지 않도록 트랜잭션 처리.
- **응답성:** 대용량 이미지 업로드 시 로딩 상태 표시.

## 4. 수락 기준 (Acceptance Criteria)
1. `.md` 파일로 생성된 게시글을 웹에서 수정했을 때 DB에 정상적으로 반영된다.
2. 수정 페이지에서 본문 내 이미지의 순서를 드래그하여 바꾼 뒤 저장하면, 상세 페이지에서 변경된 순서대로 보인다.
3. 썸네일 이미지를 변경하면 목록 페이지에서도 즉시 반영된다.
4. 수정된 내용은 서버 재시작이나 마크다운 동기화 스크립트 실행 후에도 유지된다.

## 5. 제외 범위 (Out of Scope)
- 마크다운 파일로 역수출(Export) 하는 기능 (DB에서 파일로 다시 쓰는 기능은 포함하지 않음).
- 다중 사용자 동시 편집 충돌 방지 로직.
